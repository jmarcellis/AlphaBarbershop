var _getLoopedId=function(a){var b=mfp.items.length;if(a>b-1){return a-b}else{if(a<0){return b+a}}return a},_replaceCurrTotal=function(c,b,a){return c.replace(/%curr%/gi,b+1).replace(/%total%/gi,a)};$.magnificPopup.registerModule("gallery",{options:{enabled:false,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:true,arrows:true,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var a=mfp.st.gallery,c=".mfp-gallery",b=Boolean($.fn.mfpFastClick);mfp.direction=true;if(!a||!a.enabled){return false}_wrapClasses+=" mfp-gallery";_mfpOn(OPEN_EVENT+c,function(){if(a.navigateByImgClick){mfp.wrap.on("click"+c,".mfp-img",function(){if(mfp.items.length>1){mfp.next();return false}})}_document.on("keydown"+c,function(d){if(d.keyCode===37){mfp.prev()}else{if(d.keyCode===39){mfp.next()}}})});_mfpOn("UpdateStatus"+c,function(f,d){if(d.text){d.text=_replaceCurrTotal(d.text,mfp.currItem.index,mfp.items.length)}});_mfpOn(MARKUP_PARSE_EVENT+c,function(i,g,f,h){var d=mfp.items.length;f.counter=d>1?_replaceCurrTotal(a.tCounter,h.index,d):""});_mfpOn("BuildControls"+c,function(){if(mfp.items.length>1&&a.arrows&&!mfp.arrowLeft){var f=a.arrowMarkup,g=mfp.arrowLeft=$(f.replace(/%title%/gi,a.tPrev).replace(/%dir%/gi,"left")).addClass(PREVENT_CLOSE_CLASS),e=mfp.arrowRight=$(f.replace(/%title%/gi,a.tNext).replace(/%dir%/gi,"right")).addClass(PREVENT_CLOSE_CLASS);var d=b?"mfpFastClick":"click";g[d](function(){mfp.prev()});e[d](function(){mfp.next()});if(mfp.isIE7){_getEl("b",g[0],false,true);_getEl("a",g[0],false,true);_getEl("b",e[0],false,true);_getEl("a",e[0],false,true)}mfp.container.append(g.add(e))}});_mfpOn(CHANGE_EVENT+c,function(){if(mfp._preloadTimeout){clearTimeout(mfp._preloadTimeout)}mfp._preloadTimeout=setTimeout(function(){mfp.preloadNearbyImages();mfp._preloadTimeout=null},16)});_mfpOn(CLOSE_EVENT+c,function(){_document.off(c);mfp.wrap.off("click"+c);if(mfp.arrowLeft&&b){mfp.arrowLeft.add(mfp.arrowRight).destroyMfpFastClick()}mfp.arrowRight=mfp.arrowLeft=null})},next:function(){mfp.direction=true;mfp.index=_getLoopedId(mfp.index+1);mfp.updateItemHTML()},prev:function(){mfp.direction=false;mfp.index=_getLoopedId(mfp.index-1);mfp.updateItemHTML()},goTo:function(a){mfp.direction=(a>=mfp.index);mfp.index=a;mfp.updateItemHTML()},preloadNearbyImages:function(){var d=mfp.st.gallery.preload,b=Math.min(d[0],mfp.items.length),c=Math.min(d[1],mfp.items.length),a;for(a=1;a<=(mfp.direction?c:b);a++){mfp._preloadItem(mfp.index+a)}for(a=1;a<=(mfp.direction?b:c);a++){mfp._preloadItem(mfp.index-a)}},_preloadItem:function(a){a=_getLoopedId(a);if(mfp.items[a].preloaded){return}var b=mfp.items[a];if(!b.parsed){b=mfp.parseEl(a)}_mfpTrigger("LazyLoad",b);if(b.type==="image"){b.img=$('<img class="mfp-img" />').on("load.mfploader",function(){b.hasSize=true}).on("error.mfploader",function(){b.hasSize=true;b.loadError=true;_mfpTrigger("LazyLoadError",b)}).attr("src",b.src)}b.preloaded=true}}});