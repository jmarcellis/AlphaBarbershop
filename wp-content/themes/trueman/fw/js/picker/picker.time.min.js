/*!
 * Time picker for pickadate.js v3.5.4
 * http://amsul.github.io/pickadate.js/time.htm
 */
(function(a){if(typeof define=="function"&&define.amd){define(["picker","jquery"],a)}else{if(typeof exports=="object"){module.exports=a(require("./picker.js"),require("jquery"))}else{a(Picker,jQuery)}}}(function(b,f){var g=24,e=60,d=12,h=g*e,c=b._;function a(l,n){var m=this,o=l.$node[0].value,j=l.$node.data("value"),k=j||o,i=j?n.formatSubmit:n.format;m.settings=n;m.$node=l.$node;m.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"};m.item={};m.item.clear=null;m.item.interval=n.interval||30;m.item.disable=(n.disable||[]).slice(0);m.item.enable=-(function(p){return p[0]===true?p.shift():-1})(m.item.disable);m.set("min",n.min).set("max",n.max).set("now");if(k){m.set("select",k,{format:i,fromValue:!!o})}else{m.set("select",null).set("highlight",m.item.now)}m.key={40:1,38:-1,39:1,37:-1,go:function(p){m.set("highlight",m.item.highlight.pick+p*m.item.interval,{interval:p*m.item.interval});this.render()}};l.on("render",function(){var q=l.$root.children(),p=q.find("."+n.klass.viewset),s=function(t){return["webkit","moz","ms","o",""].map(function(u){return(u?"-"+u+"-":"")+t})},r=function(t,u){s("transform").map(function(v){t.css(v,u)});s("transition").map(function(v){t.css(v,u)})};if(p.length){r(q,"none");q[0].scrollTop=~~p.position().top-(p[0].clientHeight*2);r(q,"")}},1).on("open",function(){l.$root.find("button").attr("disabled",false)},1).on("close",function(){l.$root.find("button").attr("disabled",true)},1)}a.prototype.set=function(l,m,i){var j=this,k=j.item;if(m===null){if(l=="clear"){l="select"}k[l]=m;return j}k[(l=="enable"?"disable":l=="flip"?"enable":l)]=j.queue[l].split(" ").map(function(n){m=j[n](l,m,i);return m}).pop();if(l=="select"){j.set("highlight",k.select,i)}else{if(l=="highlight"){j.set("view",k.highlight,i)}else{if(l=="interval"){j.set("min",k.min,i).set("max",k.max,i)}else{if(l.match(/^(flip|min|max|disable|enable)$/)){if(l=="min"){j.set("max",k.max,i)}if(k.select&&j.disabled(k.select)){j.set("select",k.select,i)}if(k.highlight&&j.disabled(k.highlight)){j.set("highlight",k.highlight,i)}}}}}return j};a.prototype.get=function(i){return this.item[i]};a.prototype.create=function(k,l,i){var j=this;l=l===undefined?k:l;if(c.isDate(l)){l=[l.getHours(),l.getMinutes()]}if(f.isPlainObject(l)&&c.isInteger(l.pick)){l=l.pick}else{if(f.isArray(l)){l=+l[0]*e+(+l[1])}else{if(!c.isInteger(l)){l=j.now(k,l,i)}}}if(k=="max"&&l<j.item.min.pick){l+=h}if(k!="min"&&k!="max"&&(l-j.item.min.pick)%j.item.interval!==0){l+=j.item.interval}l=j.normalize(k,l,i);return{hour:~~(g+l/e)%g,mins:(e+l%e)%e,time:(h+l)%h,pick:l}};a.prototype.createRange=function(l,k){var i=this,j=function(m){if(m===true||f.isArray(m)||c.isDate(m)){return i.create(m)}return m};if(!c.isInteger(l)){l=j(l)}if(!c.isInteger(k)){k=j(k)}if(c.isInteger(l)&&f.isPlainObject(k)){l=[k.hour,k.mins+(l*i.settings.interval)]}else{if(c.isInteger(k)&&f.isPlainObject(l)){k=[l.hour,l.mins+(k*i.settings.interval)]}}return{from:j(l),to:j(k)}};a.prototype.withinRange=function(i,j){i=this.createRange(i.from,i.to);return j.pick>=i.from.pick&&j.pick<=i.to.pick};a.prototype.overlapRanges=function(k,i){var j=this;k=j.createRange(k.from,k.to);i=j.createRange(i.from,i.to);return j.withinRange(k,i.from)||j.withinRange(k,i.to)||j.withinRange(i,k.from)||j.withinRange(i,k.to)};a.prototype.now=function(l,m){var i=this.item.interval,j=new Date(),k=j.getHours()*e+j.getMinutes(),o=c.isInteger(m),n;k-=k%i;n=m<0&&i*m+k<=-i;k+=l=="min"&&n?0:i;if(o){k+=i*(n&&l!="max"?m+1:m)}return k};a.prototype.normalize=function(k,l){var j=this.item.interval,i=this.item.min&&this.item.min.pick||0;l-=k=="min"?0:(l-i)%j;return l};a.prototype.measure=function(k,l,i){var j=this;if(!l){l=k=="min"?[0,0]:[g-1,e-1]}if(typeof l=="string"){l=j.parse(k,l)}else{if(l===true||c.isInteger(l)){l=j.now(k,l,i)}else{if(f.isPlainObject(l)&&c.isInteger(l.pick)){l=j.normalize(k,l.pick,i)}}}return l};a.prototype.validate=function(m,l,j){var k=this,i=j&&j.interval?j.interval:k.item.interval;if(k.disabled(l)){l=k.shift(l,i)}l=k.scope(l);if(k.disabled(l)){l=k.shift(l,i*-1)}return l};a.prototype.disabled=function(i){var j=this,k=j.item.disable.filter(function(l){if(c.isInteger(l)){return i.hour==l}if(f.isArray(l)||c.isDate(l)){return i.pick==j.create(l).pick}if(f.isPlainObject(l)){return j.withinRange(l,i)}});k=k.length&&!k.filter(function(l){return f.isArray(l)&&l[2]=="inverted"||f.isPlainObject(l)&&l.inverted}).length;return j.item.enable===-1?!k:k||i.pick<j.item.min.pick||i.pick>j.item.max.pick};a.prototype.shift=function(m,k){var l=this,i=l.item.min.pick,j=l.item.max.pick;k=k||l.item.interval;while(l.disabled(m)){m=l.create(m.pick+=k);if(m.pick<=i||m.pick>=j){break}}return m};a.prototype.scope=function(k){var i=this.item.min.pick,j=this.item.max.pick;return this.create(k.pick>j?j:k.pick<i?i:k)};a.prototype.parse=function(n,o,r){var k,j,l,p,m,i=this,q={};if(!o||typeof o!="string"){return o}if(!(r&&r.format)){r=r||{};r.format=i.settings.format}i.formats.toArray(r.format).map(function(t){var u,v=i.formats[t],s=v?c.trigger(v,i,[o,q]):t.replace(/^!/,"").length;if(v){u=o.substr(0,s);q[t]=u.match(/^\d+$/)?+u:u}o=o.substr(s)});for(p in q){m=q[p];if(c.isInteger(m)){if(p.match(/^(h|hh)$/i)){k=m;if(p=="h"||p=="hh"){k%=12}}else{if(p=="i"){j=m}}}else{if(p.match(/^a$/i)&&m.match(/^p/i)&&("h" in q||"hh" in q)){l=true}}}return(l?k+12:k)*e+j};a.prototype.formats={h:function(i,j){return i?c.digits(i):j.hour%d||d},hh:function(i,j){return i?2:c.lead(j.hour%d||d)},H:function(i,j){return i?c.digits(i):""+(j.hour%24)},HH:function(i,j){return i?c.digits(i):c.lead(j.hour%24)},i:function(i,j){return i?2:c.lead(j.mins)},a:function(i,j){return i?4:h/2>j.time%h?"a.m.":"p.m."},A:function(i,j){return i?2:h/2>j.time%h?"AM":"PM"},toArray:function(i){return i.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(i,j){var k=this;return k.formats.toArray(i).map(function(l){return c.trigger(k.formats[l],k,[0,j])||l.replace(/^!/,"")}).join("")}};a.prototype.isTimeExact=function(k,i){var j=this;if((c.isInteger(k)&&c.isInteger(i))||(typeof k=="boolean"&&typeof i=="boolean")){return k===i}if((c.isDate(k)||f.isArray(k))&&(c.isDate(i)||f.isArray(i))){return j.create(k).pick===j.create(i).pick}if(f.isPlainObject(k)&&f.isPlainObject(i)){return j.isTimeExact(k.from,i.from)&&j.isTimeExact(k.to,i.to)}return false};a.prototype.isTimeOverlap=function(k,i){var j=this;if(c.isInteger(k)&&(c.isDate(i)||f.isArray(i))){return k===j.create(i).hour}if(c.isInteger(i)&&(c.isDate(k)||f.isArray(k))){return i===j.create(k).hour}if(f.isPlainObject(k)&&f.isPlainObject(i)){return j.overlapRanges(k,i)}return false};a.prototype.flipEnable=function(j){var i=this.item;i.enable=j||(i.enable==-1?1:-1)};a.prototype.deactivate=function(l,i){var k=this,j=k.item.disable.slice(0);if(i=="flip"){k.flipEnable()}else{if(i===false){k.flipEnable(1);j=[]}else{if(i===true){k.flipEnable(-1);j=[]}else{i.map(function(n){var o;for(var m=0;m<j.length;m+=1){if(k.isTimeExact(n,j[m])){o=true;break}}if(!o){if(c.isInteger(n)||c.isDate(n)||f.isArray(n)||(f.isPlainObject(n)&&n.from&&n.to)){j.push(n)}}})}}}return j};a.prototype.activate=function(l,k){var j=this,i=j.item.disable,m=i.length;if(k=="flip"){j.flipEnable()}else{if(k===true){j.flipEnable(1);i=[]}else{if(k===false){j.flipEnable(-1);i=[]}else{k.map(function(p){var o,r,n,q;for(n=0;n<m;n+=1){r=i[n];if(j.isTimeExact(r,p)){o=i[n]=null;q=true;break}else{if(j.isTimeOverlap(r,p)){if(f.isPlainObject(p)){p.inverted=true;o=p}else{if(f.isArray(p)){o=p;if(!o[2]){o.push("inverted")}}else{if(c.isDate(p)){o=[p.getFullYear(),p.getMonth(),p.getDate(),"inverted"]}}}break}}}if(o){for(n=0;n<m;n+=1){if(j.isTimeExact(i[n],p)){i[n]=null;break}}}if(q){for(n=0;n<m;n+=1){if(j.isTimeOverlap(i[n],p)){i[n]=null;break}}}if(o){i.push(o)}})}}}return i.filter(function(n){return n!=null})};a.prototype.i=function(i,j){return c.isInteger(j)&&j>0?j:this.item.interval};a.prototype.nodes=function(m){var l=this,n=l.settings,j=l.item.select,o=l.item.highlight,i=l.item.view,k=l.item.disable;return c.node("ul",c.group({min:l.item.min.pick,max:l.item.max.pick,i:l.item.interval,node:"li",item:function(r){r=l.create(r);var t=r.pick,s=j&&j.pick==t,q=o&&o.pick==t,p=k&&l.disabled(r);return[c.trigger(l.formats.toString,l,[c.trigger(n.formatLabel,l,[r])||n.format,r]),(function(u){if(s){u.push(n.klass.selected)}if(q){u.push(n.klass.highlighted)}if(i&&i.pick==t){u.push(n.klass.viewset)}if(p){u.push(n.klass.disabled)}return u.join(" ")})([n.klass.listItem]),"data-pick="+r.pick+" "+c.ariaAttr({role:"option",selected:s&&l.$node.val()===c.trigger(l.formats.toString,l,[n.format,r])?true:null,activedescendant:q?true:null,disabled:p?true:null})]}})+c.node("li",c.node("button",n.clear,n.klass.buttonClear,"type=button data-clear=1"+(m?"":" disabled")+" "+c.ariaAttr({controls:l.$node[0].id})),"",c.ariaAttr({role:"presentation"})),n.klass.list,c.ariaAttr({role:"listbox",controls:l.$node[0].id}))};a.defaults=(function(i){return{clear:"Clear",format:"h:i A",interval:30,klass:{picker:i+" "+i+"--time",holder:i+"__holder",list:i+"__list",listItem:i+"__list-item",disabled:i+"__list-item--disabled",selected:i+"__list-item--selected",highlighted:i+"__list-item--highlighted",viewset:i+"__list-item--viewset",now:i+"__list-item--now",buttonClear:i+"__button--clear"}}})(b.klasses().picker);b.extend("pickatime",a)}));